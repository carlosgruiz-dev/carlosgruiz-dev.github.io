<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>"Hola PostgreSQL" (con Python) | Carlos Gustavo Ruiz</title>
<meta name=keywords content="tutorial,guides,postgresql,python,tubasededatoslibre,spanish">
<meta name=description content="Una de las tareas más frecuentes cuando iniciamos con las bases de datos
es cómo conectamos las mismas con nuestros programas. En particular
conectarse con PostgreSQL es una tarea bastante simple con Python.">
<meta name=author content>
<link rel=canonical href=https://carlosgustavoruiz.me/blog/hola-postgresql-con-python/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://carlosgustavoruiz.me/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://carlosgustavoruiz.me/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://carlosgustavoruiz.me/favicon-32x32.png>
<link rel=apple-touch-icon href=https://carlosgustavoruiz.me/apple-touch-icon.png>
<link rel=mask-icon href=https://carlosgustavoruiz.me/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="&#34;Hola PostgreSQL&#34; (con Python)">
<meta property="og:description" content="Una de las tareas más frecuentes cuando iniciamos con las bases de datos
es cómo conectamos las mismas con nuestros programas. En particular
conectarse con PostgreSQL es una tarea bastante simple con Python.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://carlosgustavoruiz.me/blog/hola-postgresql-con-python/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2013-02-18T12:39:00-04:00">
<meta property="article:modified_time" content="2015-03-07T16:24:00-04:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="&#34;Hola PostgreSQL&#34; (con Python)">
<meta name=twitter:description content="Una de las tareas más frecuentes cuando iniciamos con las bases de datos
es cómo conectamos las mismas con nuestros programas. En particular
conectarse con PostgreSQL es una tarea bastante simple con Python.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://carlosgustavoruiz.me/blog/"},{"@type":"ListItem","position":2,"name":"\"Hola PostgreSQL\" (con Python)","item":"https://carlosgustavoruiz.me/blog/hola-postgresql-con-python/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"\"Hola PostgreSQL\" (con Python)","name":"\u0022Hola PostgreSQL\u0022 (con Python)","description":"Una de las tareas más frecuentes cuando iniciamos con las bases de datos es cómo conectamos las mismas con nuestros programas. En particular conectarse con PostgreSQL es una tarea bastante simple con Python.\n","keywords":["tutorial","guides","postgresql","python","tubasededatoslibre","spanish"],"articleBody":"Una de las tareas más frecuentes cuando iniciamos con las bases de datos es cómo conectamos las mismas con nuestros programas. En particular conectarse con PostgreSQL es una tarea bastante simple con Python.\nComo sabrá en Python buena parte de los elementos del lenguaje se encuentran en las PEP (Python Enhancement Proposals), y en cuanto a las bases de datos esto no es la excepción y la DB API 2.0 se especifica en la PEP-249, siga el vínculo para conocer los detalles. Una de las consecuencias directas de esta normalización del lenguaje es que muy probablemente lo que use para PostgreSQL con este tutorial sea válido para otro gestor de base de datos relacional cuyo conector implemente esta API.\nInstalando Psycopg2 Si utiliza Linux prefiera instalar la versión de psycopg2 correspondiente a su distribución, por ejemplo para Fedora sería:\n$ yum install python-psycopg2 y para Debian sería:\n$ aptitude install python-psycopg2 Sin embargo, también puede hacer uso del instalador de Python llamado pip. Este instalador es muy potente, pero debido a que psycopg2 necesitará compilar unos fuentes durante la instalación asegúrese que su computador tenga instaladas las bibliotecas de desarrollo de PostgreSQL y obviamente un compilador. Si todo está bien y tiene los permisos adecuados, bastará escribir en su terminal:\n$ pip install psycopg2 Si utiliza Windows descargue la versión correspondiente para la versión de su Sistema Operativo, su Python y de su PostgreSQL en la página de win-psycopg.\nConectando Python con PostgreSQL Si todo fue bien con la instalación entonces será sencillo comunicarse con PostgreSQL. Para probar la instalación y la conexión con su gestor de base de datos escriba lo que sigue en su terminal:\n$ python Python 2.7.3 (default, Jan 2 2013, 16:53:07) [GCC 4.7.2] on linux2 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.  import psycopg2  exit() $ En caso de no haber ningun mensaje de error entonces ha instalado correctamente psycopg2. El siguiente paso será conectar con su base de datos, para ello crearemos una base de datos para pruebas.\n$ su - postgres $ createdb prueba $ exit y luego procedemos a conectar con PostgreSQL desde Python:\n$ python Python 2.7.3 (default, Jan 2 2013, 16:53:07) [GCC 4.7.2] on linux2 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.  import psycopg2  conexion = psycopg2.connect(\"dbname=prueba user=postgres\")  conexion.close()  Recuerde hacer de su string de conexión (o dsn) adecuado para su configuración: los parámetros de conexión aceptados son: dbname, user, password, host y port, para más detalles ver: psycopg2.connect. En caso de recibir algún error, verifique con su cliente PostgreSQL que la configuración que utilizó para Python esté correcta.\nConversando con PostgreSQL al estilo Python Dado por sentado que no tuvo problemas de conexión entonces retomamos la sesión interactiva y pasaremos a crear una tabla y llenarla con datos, de modo de mostrar cómo se envían instrucciones mediante la DB API 2.0 de Python al gestor de base de datos:\n conexion = psycopg2.connect(\"dbname=prueba user=postgres\") # se crea la conexión  cursor = conexion.cursor() # se crea un cursor  query1 = \"\"\"CREATE TABLE la_vinotinto (id serial primary key, goles integer, nombres varchar(100), apellidos varchar(100));\"\"\" # consulta para crear la tabla  cursor.execute(query1)  query2 = \"INSERT INTO la_vinotinto(goles, nombres, apellidos) VALUES (%, %, %)\"  cursor.execute(query2, (22, \"Giancarlo\", \"Maldonado\"))  cursor.execute(query2, (21, \"Juan\", \"Arango\"))  cursor.execute(query2, (14, \"Ruberth\", \"Moran\"))  cursor.execute(query2, (11, \"Jose Manuel\", \"Rey\")) Ahora vamos a preguntarle algunas cosas a nuestra tabla de goleadores de la vinotinto:\n query3 = \"SELECT * FROM la_vinotinto\"  cursor.execute(query3)  cursor.fetchone() (1, 22, \"Giancarlo\", \"Maldonado\")  query4 = \"SELECT apellidos, nombre FROM la_vinotinto ORDER BY goles;\"  cursor.execute(query4)  resultados = cursor.fetchall()  for i in resultados: ... print i ... ('Rey', 'Jose Manuel') ('Moran', 'Ruberth') ('Arango', 'Juan') ('Maldonado', 'Giancarlo')  Finalmente con Python debe dejar claro a PostgreSQL que la comunicación se ha terminado, por lo que es necesario cerrar le cursor y la conexión. Es importante este paso, así liberará recursos en su programa y permitirá al gestor de bases de datos liberar la conexión dedicada al programa y usarla para otro usuario.\n  cursor.close()  conexion.close() Pequeño Script de Python con PostgreSQL Ahora vamos a escribir un pequeño programa con lo aprendido en el diálogo anterior, copie el siguiente programa en un archivo llamado hola_postgres.py:\n#/usr/bin/env python # -*- coding: utf-8 -*- import psycopg2 DSN = \"dbname=prueba user=postgres\" def leer_datos(): con = psycopg2.connect(DSN) cur = con.cursor() query = \"SELECT * FROM la_vinotinto;\" cur.execute(query) for jugador in cur.fetchall(): print(jugador) cur.close() con.close() if __name__== \"__main__\": leer_datos(); El programa realiza en la función leer_datos() un despliegue de los jugadores almacenados en la tabla la_vinotinto, en si no reviste de mucha complejidad. Finalmente para ejecutar el programa escriba en su terminal:\n$ python hola_postgres.py (1, 22, 'Maldonado', 'Giancarlo') (2, 21, 'Arango', 'Juan') (3, 14,'Moran', 'Ruberth') (4, 11'Rey', 'Jose Manuel') $ Recomendado leer Obviamente esto es un pequeño abreboca, para profundizar un poco más en las posibilidades que ofrecen estas herramientas es necesario leer un poco más. Sugiero como lecturas complementarias las siguientes páginas.\n PEP-249 Documentación de Psycopg2 Documentación de PostgreSQL Documentación de pip ","wordCount":"853","inLanguage":"en","datePublished":"2013-02-18T12:39:00-04:00","dateModified":"2015-03-07T16:24:00-04:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://carlosgustavoruiz.me/blog/hola-postgresql-con-python/"},"publisher":{"@type":"Organization","name":"Carlos Gustavo Ruiz","logo":{"@type":"ImageObject","url":"https://carlosgustavoruiz.me/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://carlosgustavoruiz.me/ accesskey=h title="Carlos Gustavo Ruiz (Alt + H)">Carlos Gustavo Ruiz</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://carlosgustavoruiz.me/blog/ title=blog>
<span>blog</span>
</a>
</li>
<li>
<a href=https://github.com/carlosgruiz-dev/carlosgruiz-dev/wiki title=wiki>
<span>wiki</span>
</a>
</li>
<li>
<a href=https://carlosgustavoruiz.me/talks/ title=talks>
<span>talks</span>
</a>
</li>
<li>
<a href=https://carlosgustavoruiz.me/bookmarks/ title=bookmarks>
<span>bookmarks</span>
</a>
</li>
<li>
<a href=https://carlosgustavoruiz.me/now/ title=now>
<span>now</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
"Hola PostgreSQL" (con Python)
</h1>
<div class=post-meta><span title="2013-02-18 12:39:00 -0400 -0400">February 18, 2013</span>
</div>
</header>
<div class=post-content><p>Una de las tareas más frecuentes cuando iniciamos con las bases de datos
es cómo conectamos las mismas con nuestros programas. En particular
conectarse con PostgreSQL es una tarea bastante simple con Python.</p>
<p>Como
sabrá en Python buena parte de los elementos del lenguaje se encuentran
en las <a href=http://www.python.org/dev/peps/>PEP</a> (Python Enhancement
Proposals), y en cuanto a las bases de datos esto no es la excepción y
la <a href=http://www.python.org/dev/peps/pep-0249/>DB API 2.0</a> se especifica
en la PEP-249, siga el vínculo para conocer los detalles. Una de las
consecuencias directas de esta normalización del lenguaje es que muy
probablemente lo que use para PostgreSQL con este tutorial sea válido
para otro gestor de base de datos relacional cuyo conector implemente
esta API.</p>
<h2 id=instalando-psycopg2>Instalando Psycopg2<a hidden class=anchor aria-hidden=true href=#instalando-psycopg2>#</a></h2>
<p>Si utiliza Linux prefiera instalar la versión de psycopg2
correspondiente a su distribución, por ejemplo para
<a href=http://fedoraproject.org/>Fedora</a> sería:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ yum install python-psycopg2
</code></pre></div><p>y para <a href=http://www.debian.org/>Debian</a> sería:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ aptitude install python-psycopg2
</code></pre></div><p>Sin embargo, también puede hacer uso del instalador de Python llamado
<a href=http://www.pip-installer.org/en/latest/>pip</a>. Este instalador es muy
potente, pero debido a que psycopg2 necesitará compilar unos fuentes
durante la instalación asegúrese que su computador tenga instaladas las
bibliotecas de desarrollo de PostgreSQL y obviamente un compilador. Si
todo está bien y tiene los permisos adecuados, bastará escribir en su
terminal:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pip install psycopg2
</code></pre></div><p>Si utiliza Windows descargue la versión correspondiente para la versión
de su Sistema Operativo, su Python y de su PostgreSQL en la página de
<a href=http://www.stickpeople.com/projects/python/win-psycopg/>win-psycopg</a>.</p>
<h2 id=conectando-python-con-postgresql>Conectando Python con PostgreSQL<a hidden class=anchor aria-hidden=true href=#conectando-python-con-postgresql>#</a></h2>
<p>Si todo fue bien con la instalación entonces será sencillo comunicarse
con PostgreSQL. Para probar la instalación y la conexión con su gestor
de base de datos escriba lo que sigue en su terminal:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python
Python 2.7.3 <span style=color:#f92672>(</span>default, Jan <span style=color:#ae81ff>2</span> 2013, 16:53:07<span style=color:#f92672>)</span>
<span style=color:#f92672>[</span>GCC 4.7.2<span style=color:#f92672>]</span> on linux2
Type <span style=color:#e6db74>&#34;help&#34;</span>, <span style=color:#e6db74>&#34;copyright&#34;</span>, <span style=color:#e6db74>&#34;credits&#34;</span> or <span style=color:#e6db74>&#34;license&#34;</span> <span style=color:#66d9ef>for</span> more information.
&gt;&gt;&gt; import psycopg2
&gt;&gt;&gt; exit<span style=color:#f92672>()</span>
$
</code></pre></div><p>En caso de no haber ningun mensaje de error entonces ha instalado
correctamente psycopg2. El siguiente paso será conectar con su base de
datos, para ello crearemos una base de datos para pruebas.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ su - postgres
$ createdb prueba
$ exit
</code></pre></div><p>y luego procedemos a conectar con PostgreSQL desde Python:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python
Python 2.7.3 <span style=color:#f92672>(</span>default, Jan <span style=color:#ae81ff>2</span> 2013, 16:53:07<span style=color:#f92672>)</span>
<span style=color:#f92672>[</span>GCC 4.7.2<span style=color:#f92672>]</span> on linux2
Type <span style=color:#e6db74>&#34;help&#34;</span>, <span style=color:#e6db74>&#34;copyright&#34;</span>, <span style=color:#e6db74>&#34;credits&#34;</span> or <span style=color:#e6db74>&#34;license&#34;</span> <span style=color:#66d9ef>for</span> more information.
&gt;&gt;&gt; import psycopg2
&gt;&gt;&gt; conexion <span style=color:#f92672>=</span> psycopg2.connect<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;dbname=prueba user=postgres&#34;</span><span style=color:#f92672>)</span>
&gt;&gt;&gt; conexion.close<span style=color:#f92672>()</span>
&gt;&gt;&gt;
</code></pre></div><p>Recuerde hacer de su string de conexión (o dsn) adecuado para su
configuración: los parámetros de conexión aceptados son: <code>dbname</code>,
<code>user</code>, <code>password</code>, <code>host</code> y <code>port</code>, para más detalles ver:
<a href=http://pythonhosted.org/psycopg2/module.html#psycopg2.connect>psycopg2.connect</a>.
En caso de recibir algún error, verifique con su cliente PostgreSQL que
la configuración que utilizó para Python esté correcta.</p>
<h2 id=conversando-con-postgresql-al-estilo-python>Conversando con PostgreSQL al estilo Python<a hidden class=anchor aria-hidden=true href=#conversando-con-postgresql-al-estilo-python>#</a></h2>
<p>Dado por sentado que no tuvo problemas de conexión entonces retomamos la
sesión interactiva y pasaremos a crear una tabla y llenarla con datos,
de modo de mostrar cómo se envían instrucciones mediante la DB API 2.0
de Python al gestor de base de datos:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> conexion <span style=color:#f92672>=</span> psycopg2<span style=color:#f92672>.</span>connect(<span style=color:#e6db74>&#34;dbname=prueba user=postgres&#34;</span>) <span style=color:#75715e># se crea la conexión</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor <span style=color:#f92672>=</span> conexion<span style=color:#f92672>.</span>cursor() <span style=color:#75715e># se crea un cursor</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> query1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;&#34;CREATE TABLE la_vinotinto (id serial primary key, goles integer,
</span><span style=color:#e6db74>                    nombres varchar(100), apellidos varchar(100));&#34;&#34;&#34;</span> <span style=color:#75715e># consulta para crear la tabla</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query1)
<span style=color:#f92672>&gt;&gt;&gt;</span> query2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;INSERT INTO la_vinotinto(goles, nombres, apellidos) VALUES (%, %, %)&#34;</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query2, (<span style=color:#ae81ff>22</span>, <span style=color:#e6db74>&#34;Giancarlo&#34;</span>, <span style=color:#e6db74>&#34;Maldonado&#34;</span>))
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query2, (<span style=color:#ae81ff>21</span>, <span style=color:#e6db74>&#34;Juan&#34;</span>, <span style=color:#e6db74>&#34;Arango&#34;</span>))
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query2, (<span style=color:#ae81ff>14</span>, <span style=color:#e6db74>&#34;Ruberth&#34;</span>, <span style=color:#e6db74>&#34;Moran&#34;</span>))
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query2, (<span style=color:#ae81ff>11</span>, <span style=color:#e6db74>&#34;Jose Manuel&#34;</span>, <span style=color:#e6db74>&#34;Rey&#34;</span>))
</code></pre></div><p>Ahora vamos a preguntarle algunas cosas a nuestra tabla de goleadores de
la vinotinto:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> query3 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT * FROM la_vinotinto&#34;</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query3)
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>fetchone()
(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>22</span>, <span style=color:#e6db74>&#34;Giancarlo&#34;</span>, <span style=color:#e6db74>&#34;Maldonado&#34;</span>)
<span style=color:#f92672>&gt;&gt;&gt;</span> query4 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT apellidos, nombre FROM la_vinotinto ORDER BY goles;&#34;</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>execute(query4)
<span style=color:#f92672>&gt;&gt;&gt;</span> resultados <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> resultados:
<span style=color:#f92672>...</span>    print i
<span style=color:#f92672>...</span>
(<span style=color:#e6db74>&#39;Rey&#39;</span>, <span style=color:#e6db74>&#39;Jose Manuel&#39;</span>)
(<span style=color:#e6db74>&#39;Moran&#39;</span>, <span style=color:#e6db74>&#39;Ruberth&#39;</span>)
(<span style=color:#e6db74>&#39;Arango&#39;</span>, <span style=color:#e6db74>&#39;Juan&#39;</span>)
(<span style=color:#e6db74>&#39;Maldonado&#39;</span>, <span style=color:#e6db74>&#39;Giancarlo&#39;</span>)
<span style=color:#f92672>&gt;&gt;&gt;</span>
</code></pre></div><p>Finalmente con Python debe dejar claro a PostgreSQL que la comunicación
se ha terminado, por lo que es necesario cerrar le cursor y la conexión.
Es importante este paso, así liberará recursos en su programa y
permitirá al gestor de bases de datos liberar la conexión dedicada al
programa y usarla para otro usuario.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> 
<span style=color:#f92672>&gt;&gt;&gt;</span> cursor<span style=color:#f92672>.</span>close()
<span style=color:#f92672>&gt;&gt;&gt;</span> conexion<span style=color:#f92672>.</span>close()
</code></pre></div><h2 id=pequeño-script-de-python-con-postgresql>Pequeño Script de Python con PostgreSQL<a hidden class=anchor aria-hidden=true href=#pequeño-script-de-python-con-postgresql>#</a></h2>
<p>Ahora vamos a escribir un pequeño programa con lo aprendido en el
diálogo anterior, copie el siguiente programa en un archivo llamado
<code>hola_postgres.py</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e>#/usr/bin/env python</span>
<span style=color:#75715e># -*- coding: utf-8 -*-</span>

<span style=color:#f92672>import</span> psycopg2
DSN <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;dbname=prueba user=postgres&#34;</span>

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>leer_datos</span>():
    con <span style=color:#f92672>=</span> psycopg2<span style=color:#f92672>.</span>connect(DSN)
    cur <span style=color:#f92672>=</span> con<span style=color:#f92672>.</span>cursor()
    query <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT * FROM la_vinotinto;&#34;</span>
    cur<span style=color:#f92672>.</span>execute(query)
    <span style=color:#66d9ef>for</span> jugador <span style=color:#f92672>in</span> cur<span style=color:#f92672>.</span>fetchall():
        print(jugador)
    cur<span style=color:#f92672>.</span>close()
    con<span style=color:#f92672>.</span>close()

<span style=color:#66d9ef>if</span> __name__<span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
   leer_datos();
</code></pre></div><p>El programa realiza en la función leer_datos() un despliegue de los
jugadores almacenados en la tabla la_vinotinto, en si no reviste de
mucha complejidad. Finalmente para ejecutar el programa escriba en su
terminal:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ python hola_postgres.py
<span style=color:#f92672>(</span>1, 22, <span style=color:#e6db74>&#39;Maldonado&#39;</span>, <span style=color:#e6db74>&#39;Giancarlo&#39;</span><span style=color:#f92672>)</span>
<span style=color:#f92672>(</span>2, 21, <span style=color:#e6db74>&#39;Arango&#39;</span>, <span style=color:#e6db74>&#39;Juan&#39;</span><span style=color:#f92672>)</span>
<span style=color:#f92672>(</span>3, 14,<span style=color:#e6db74>&#39;Moran&#39;</span>, <span style=color:#e6db74>&#39;Ruberth&#39;</span><span style=color:#f92672>)</span>
<span style=color:#f92672>(</span>4, 11<span style=color:#e6db74>&#39;Rey&#39;</span>, <span style=color:#e6db74>&#39;Jose Manuel&#39;</span><span style=color:#f92672>)</span>
$
</code></pre></div><h2 id=recomendado-leer>Recomendado leer<a hidden class=anchor aria-hidden=true href=#recomendado-leer>#</a></h2>
<p>Obviamente esto es un pequeño abreboca, para profundizar un poco más en
las posibilidades que ofrecen estas herramientas es necesario leer un
poco más. Sugiero como lecturas complementarias las siguientes páginas.</p>
<ul>
<li><a href=http://www.python.org/dev/peps/pep-0249/>PEP-249</a></li>
<li><a href=http://pythonhosted.org/psycopg2/>Documentación de Psycopg2</a></li>
<li><a href=http://www.postgresql.org/docs/>Documentación de PostgreSQL</a></li>
<li><a href=http://www.pip-installer.org/>Documentación de pip</a></li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://carlosgustavoruiz.me/tags/tutorial/>tutorial</a></li>
<li><a href=https://carlosgustavoruiz.me/tags/guides/>guides</a></li>
<li><a href=https://carlosgustavoruiz.me/tags/postgresql/>postgresql</a></li>
<li><a href=https://carlosgustavoruiz.me/tags/python/>python</a></li>
<li><a href=https://carlosgustavoruiz.me/tags/tubasededatoslibre/>tubasededatoslibre</a></li>
<li><a href=https://carlosgustavoruiz.me/tags/spanish/>spanish</a></li>
</ul>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://carlosgustavoruiz.me/>Carlos Gustavo Ruiz</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>